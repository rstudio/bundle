<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Bundle an h2o object — bundle.H2OAutoML • bundle</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Bundle an h2o object — bundle.H2OAutoML"><meta name="description" content="Bundling a model prepares it to be saved to a file and later
restored for prediction in a new R session. See the 'Value' section for
more information on bundles and their usage."><meta property="og:description" content="Bundling a model prepares it to be saved to a file and later
restored for prediction in a new R session. See the 'Value' section for
more information on bundles and their usage."></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">bundle</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/bundle.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rstudio/bundle/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Bundle an <code>h2o</code> object</h1>
      <small class="dont-index">Source: <a href="https://github.com/rstudio/bundle/blob/main/R/bundle_h2o.R" class="external-link"><code>R/bundle_h2o.R</code></a></small>
      <div class="d-none name"><code>bundle_h2o.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Bundling a model prepares it to be saved to a file and later
restored for prediction in a new R session. See the 'Value' section for
more information on bundles and their usage.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'H2OAutoML'</span></span>
<span><span class="fu"><a href="bundle.html">bundle</a></span><span class="op">(</span><span class="va">x</span>, id <span class="op">=</span> <span class="cn">NULL</span>, n <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'H2OMultinomialModel'</span></span>
<span><span class="fu"><a href="bundle.html">bundle</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'H2OBinomialModel'</span></span>
<span><span class="fu"><a href="bundle.html">bundle</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'H2ORegressionModel'</span></span>
<span><span class="fu"><a href="bundle.html">bundle</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>An object returned from modeling functions in the <a href="https://rdrr.io/pkg/h2o/man/h2o-package.html" class="external-link">h2o</a>
package.</p></dd>


<dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>A single character. The <code>model_id</code> entry in the leaderboard.
Applies to AutoML output only. Supply only one of this argument or
<code>n</code>.</p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>An integer giving the position in the leaderboard of the model
to bundle. Applies to AutoML output only. Will be ignored if <code>id</code> is
supplied.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Not used in this bundler and included for compatibility with
the generic only. Additional arguments passed to this method will return
an error.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A bundle object with subclass <code>bundled_h2o</code>.</p>
<p>Bundles are a list subclass with two components:</p>
<dl><dt>object</dt>
<dd><p>An R object. Gives the output of native serialization
methods from the model-supplying package, sometimes with additional
classes or attributes that aid portability. This is often
a <a href="https://rdrr.io/r/base/raw.html" class="external-link">raw</a> object.</p></dd>

<dt>situate</dt>
<dd><p>A function. The <code>situate()</code> function is defined when
<code><a href="bundle.html">bundle()</a></code> is called, though is a loose analogue of an <code><a href="bundle.html">unbundle()</a></code> S3
method for that object. Since the function is defined on <code><a href="bundle.html">bundle()</a></code>, it
has access to references and dependency information that can
be saved alongside the <code>object</code> component. Calling <code><a href="bundle.html">unbundle()</a></code> on a
bundled object <code>x</code> calls <code>x$situate(x$object)</code>, returning the
unserialized version of <code>object</code>. <code>situate()</code> will also restore needed
references, such as server instances and environmental variables.</p></dd>


</dl><p>Bundles are R objects that represent a "standalone" version of their
analogous model object. Thus, bundles are ready for saving to a file; saving
with <code><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">base::saveRDS()</a></code> is our recommended serialization strategy for bundles,
unless documented otherwise for a specific method.</p>
<p>To restore the original model object <code>x</code> in a new environment, load its
bundle with <code><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">base::readRDS()</a></code> and run <code><a href="bundle.html">unbundle()</a></code> on it. The output
of <code><a href="bundle.html">unbundle()</a></code> is a model object that is ready to <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> on new data,
and other restored functionality (like plotting or summarizing) is supported
as a side effect only.</p>
<p>The bundle package wraps native serialization methods from model-supplying
packages. Between versions, those model-supplying packages may change their
native serialization methods, possibly introducing problems with re-loading
objects serialized with previous package versions. The bundle package does
not provide checks for these sorts of changes, and ought to be used in
conjunction with tooling for managing and monitoring model environments
like <a href="https://rstudio.github.io/vetiver-r/reference/vetiver-package.html" class="external-link">vetiver</a> or <a href="https://rstudio.github.io/renv/reference/renv-package.html" class="external-link">renv</a>.</p>
<p>See <code><a href="../articles/bundle.html">vignette("bundle")</a></code> for more information on bundling and its motivation.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>These methods wrap <code><a href="https://rdrr.io/pkg/h2o/man/h2o.save_mojo.html" class="external-link">h2o::h2o.save_mojo()</a></code> and
<code><a href="https://rdrr.io/pkg/h2o/man/h2o.saveModel.html" class="external-link">h2o::h2o.saveModel()</a></code>.</p>
<p>Other bundlers:
<code><a href="bundle.html">bundle</a>()</code>,
<code><a href="bundle_bart.html">bundle.bart</a>()</code>,
<code><a href="bundle_keras.html">bundle.keras.engine.training.Model</a>()</code>,
<code><a href="bundle_torch.html">bundle.luz_module_fitted</a>()</code>,
<code><a href="bundle_parsnip.html">bundle.model_fit</a>()</code>,
<code><a href="bundle_stacks.html">bundle.model_stack</a>()</code>,
<code><a href="bundle_recipe.html">bundle.recipe</a>()</code>,
<code><a href="bundle_embed.html">bundle.step_umap</a>()</code>,
<code><a href="bundle_caret.html">bundle.train</a>()</code>,
<code><a href="bundle_workflows.html">bundle.workflow</a>()</code>,
<code><a href="bundle_xgboost.html">bundle.xgb.Booster</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># fit model and bundle ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/h2oai/h2o-3" class="external-link">h2o</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ----------------------------------------------------------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Your next step is to start H2O:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     &gt; h2o.init()</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> For H2O package documentation, ask for help:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     &gt; ??h2o</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> After starting H2O, you can use the Web UI at http://localhost:54321</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> For more information visit https://docs.h2o.ai</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ----------------------------------------------------------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘h2o’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:stats’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     cor, sd, var</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     %*%, %in%, &amp;&amp;, apply, as.factor, as.numeric, colnames,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     colnames&lt;-, ifelse, is.character, is.factor, is.numeric, log,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     log10, log1p, log2, round, signif, trunc, ||</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/h2o/man/h2o.init.html" class="external-link">h2o.init</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> H2O is not running yet, starting it now...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Note:  In case of errors look at the following log files:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     /tmp/RtmpAJtTq9/file21dc654b5956/h2o_runner_started_from_r.out</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     /tmp/RtmpAJtTq9/file21dc131faa06/h2o_runner_started_from_r.err</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Starting H2O JVM and connecting: ......... Connection successful!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> R is connected to the H2O cluster: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     H2O cluster uptime:         2 seconds 969 milliseconds </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     H2O cluster timezone:       UTC </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     H2O data parsing timezone:  UTC </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     H2O cluster version:        3.44.0.3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     H2O cluster version age:    10 months and 22 days </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     H2O cluster name:           H2O_started_from_R_runner_ydg016 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     H2O cluster total nodes:    1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     H2O cluster total memory:   3.90 GB </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     H2O cluster total cores:    4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     H2O cluster allowed cores:  4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     H2O cluster healthy:        TRUE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     H2O Connection ip:          localhost </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     H2O Connection port:        54321 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     H2O Connection proxy:       NA </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     H2O Internal Security:      FALSE </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     R Version:                  R version 4.4.2 (2024-10-31) </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Your H2O cluster version is (10 months and 22 days) old. There may be a newer version available.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Please download and install the latest version from: https://h2o-release.s3.amazonaws.com/h2o/latest_stable.html</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cars_h2o</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/h2o/man/as.h2o.html" class="external-link">as.h2o</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                        |                                                                |   0%  |                                                                        |================================================================| 100%</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cars_fit</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/pkg/h2o/man/h2o.glm.html" class="external-link">h2o.glm</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/h2o/man/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">cars_h2o</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">11</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>    y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/h2o/man/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">cars_h2o</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>    training_frame <span class="op">=</span> <span class="va">cars_h2o</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                        |                                                                |   0%  |                                                                        |================================================================| 100%</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cars_bundle</span> <span class="op">&lt;-</span> <span class="fu"><a href="bundle.html">bundle</a></span><span class="op">(</span><span class="va">cars_fit</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># then, after saveRDS + readRDS or passing to a new session ----------</span></span></span>
<span class="r-in"><span><span class="va">cars_unbundled</span> <span class="op">&lt;-</span> <span class="fu"><a href="bundle.html">unbundle</a></span><span class="op">(</span><span class="va">cars_fit</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">cars_unbundled</span>, <span class="va">cars_h2o</span><span class="op">[</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">11</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                        |                                                                |   0%  |                                                                        |================================================================| 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    predict</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 21.94826</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 21.64605</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 25.34547</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 20.44883</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 17.04492</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 20.12585</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [32 rows x 1 column] </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/h2o/man/h2o.shutdown.html" class="external-link">h2o.shutdown</a></span><span class="op">(</span>prompt <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://juliasilge.com/" class="external-link">Julia Silge</a>, Simon Couch, Qiushi Yan, <a href="https://github.com/topepo" class="external-link">Max Kuhn</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer></body></html>

